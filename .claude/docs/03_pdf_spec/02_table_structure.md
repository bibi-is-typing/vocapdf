# VocaPDF - PDF 테이블 구조

## 📌 개요

이 문서는 VocaPDF로 생성되는 PDF 내 테이블의 상세 구조를 정의합니다. 사용자의 선택 옵션에 따라 동적으로 변경되는 컬럼 구성, 스타일, 셀 병합 규칙 등을 다룹니다.

---

## 📊 테이블 구조 예시

### 최소 구조 (필수 컬럼)

| 단어 | 의미 | 영영뜻 |
| :--- | :--: | :--- |
| apple | 1 | A round fruit with red or green skin |

### 전체 구조 (모든 옵션 활성화)

| ☐ | 단어 | 의미 | 영영뜻 | 유의어 | 반의어 | 관계어 |
| :-: | :--- | :--: | :--- | :--- | :--- | :--- |
| ☐ | hot | 1 | Having a high temperature | warm, heated | cold | heat, fire |

---

## 🔢 컬럼 상세 정의

### 1. 체크박스 `☐` (선택)

-   **표시 조건**: 사용자가 `체크박스 추가` 옵션을 선택했을 때
-   **너비**: 약 10mm
-   **내용**: 빈 네모 기호 `☐`
-   **정렬**: 중앙
-   **용도**: 사용자가 출력 후 직접 암기를 확인하는 용도

### 2. 단어 (필수)

-   **너비**: 약 25-30mm
-   **내용**: 영어 단어 (e.g., `apple`)
-   **정렬**: 중앙
-   **스타일**: **14pt, Bold**
-   **특징**: 한 단어에 여러 의미가 있을 경우, 이 셀은 수직으로 **병합**됩니다.

### 3. 의미 (필수)

-   **너비**: 약 10mm
-   **내용**: 의미 번호 (e.g., `1`, `2`)
-   **정렬**: 중앙
-   **스타일**: *11pt, Italic*

### 4. 영영뜻 (선택)

-   **표시 조건**: 사용자가 `영영뜻` 개수를 1개 이상 선택했을 때
-   **너비**: 약 50-60mm (가장 넓은 비중)
-   **내용**: 단어의 영어 정의
-   **정렬**: 좌측
-   **특징**: 내용이 길어지면 자동으로 줄바꿈 처리됩니다.

### 5. 유의어 (선택)

-   **표시 조건**: 사용자가 `유의어` 개수를 1개 이상 선택했을 때
-   **너비**: 약 25-30mm
-   **내용**: 쉼표(`,`)로 구분된 유의어 목록. 정보가 없을 경우 하이픈(`-`)으로 표시됩니다.
-   **정렬**: 좌측

### 6. 반의어 (선택)

-   **표시 조건**: 사용자가 `반의어` 개수를 1개 이상 선택했을 때
-   **너비**: 약 25-30mm
-   **내용**: 쉼표(`,`)로 구분된 반의어 목록. 정보가 없을 경우 하이픈(`-`)으로 표시됩니다.
-   **정렬**: 좌측

### 7. 관계어 (선택)

-   **표시 조건**: 사용자가 `관계어` 개수를 1개 이상 선택했을 때
-   **너비**: 약 25-30mm
-   **내용**: 쉼표(`,`)로 구분된 관계어 목록. 정보가 없을 경우 하이픈(`-`)으로 표시됩니다.
-   **정렬**: 좌측

---

## 🔀 셀 병합 (Rowspan) 규칙

한 단어가 여러 의미를 가질 때, **단어 컬럼**의 셀만 의미 개수만큼 수직으로 병합하여 가독성을 높입니다.

-   **의미 1개**:
| ☐ | **apple** | *1* | A round fruit... |
| :-: | :---: | :-: | :--- |
-   **의미 2개**:
| ☐ | **bank** | *1* | A financial institution... |
| :-: | | *2* | Land alongside a river... |

### `jsPDF-AutoTable` 구현 로직

테이블 데이터를 생성할 때, 각 단어의 첫 번째 의미에 해당하는 행에만 `rowSpan` 속성을 적용합니다.

```javascript
const tableBody = [];
for (const item of wordData) {
  const meanings = item.meanings;
  for (let i = 0; i < meanings.length; i++) {
    const row = [];
    
    // 첫 번째 의미의 행에만 단어 셀을 추가하고 rowSpan 설정
    if (i === 0) {
      row.push({
        content: item.word,
        rowSpan: meanings.length,
        styles: { fontStyle: 'bold', fontSize: 14, halign: 'center', valign: 'middle' }
      });
    }
    
    // 나머지 컬럼 데이터 추가
    row.push(meanings[i].meaningNumber);
    // ...
    
    tableBody.push(row);
  }
}
```

---

## 🎨 테이블 스타일

### 헤더 (Header)

-   **배경색**: `#2c3e50` (어두운 회색)
-   **글자색**: `#ffffff` (흰색)
-   **스타일**: **12pt, Bold**
-   **정렬**: 중앙

### 본문 (Body)

-   **구분선**: `#dddddd` (밝은 회색) 실선
-   **교차 배경색 (Zebra-striping)**: 홀수 행은 흰색(`#ffffff`), 짝수 행은 밝은 회색(`#f9f9f9`)을 적용하여 가독성을 높입니다.
-   **셀 패딩**: 상하좌우 8px
-   **최소 행 높이**: 약 10mm

---

## 📐 동적 컬럼 너비

테이블의 전체 너비는 **180mm** (A4 용지 너비 210mm - 좌우 여백 30mm)입니다. 이 공간을 사용자가 선택한 옵션에 따라 동적으로 배분합니다.

-   **최소 구조** (단어, 의미, 영영뜻):
    -   `단어(30mm)` + `의미(15mm)` + `영영뜻(135mm)`
-   **전체 구조** (모든 옵션):
    -   `체크박스(10mm)` + `단어(25mm)` + `의미(10mm)` + `영영뜻(55mm)` + `유의어(25mm)` + `반의어(25mm)` + `관계어(25mm)`

---

## 📝 문서 이력
- 2025-10-09: 초안 작성