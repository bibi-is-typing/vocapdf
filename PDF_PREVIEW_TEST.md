# PDF 미리보기 및 생성 테스트 가이드

## 🎯 구현된 기능

### 1. HTML 미리보기
- ✅ A4 크기 시뮬레이션 (210mm × 297mm)
- ✅ 실시간 옵션 반영
- ✅ 실제 PDF와 동일한 레이아웃
- ✅ 스크롤 가능한 미리보기

### 2. PDF 생성 개선
- ✅ 의미 1개만 표시 (다의어 제거)
- ✅ 사용자 정의 날짜 표시
- ✅ 타입별 그룹화 지원
- ✅ 간소화된 테이블 구조

---

## 🧪 테스트 시나리오

### ✅ 시나리오 1: 단어만 입력 (기본 케이스)

**입력**:
```
apple
book
computer
happy
water
```

**옵션 설정**:
- 의미 표시: "영영+한영"
- 출력 형식: "입력 순서대로"
- 학습 날짜: "2025년 10월 10일"
- 체크박스 포함: 체크

**검증 항목**:
- [ ] HTML 미리보기에서 5개 단어 모두 표시됨
- [ ] 각 단어당 1개의 행만 있음 (다의어 없음)
- [ ] 테이블 헤더: ☐ | 단어 | 의미 | 영영뜻
- [ ] 날짜가 상단에 "학습일: 2025년 10월 10일" 표시
- [ ] PDF 생성 후 미리보기와 동일한 레이아웃
- [ ] 페이지 번호 "페이지 1 / 총 1" 표시

---

### ✅ 시나리오 2: 타입별 그룹화

**입력**:
```
apple
book
kick the bucket
computer
break the ice
She loves reading books.
water
piece of cake
```

**옵션 설정**:
- 의미 표시: "한영 뜻만"
- 출력 형식: "단어끼리, 숙어끼리, 문장끼리"
- 학습 날짜: "2025년 10월 10일"
- 체크박스 포함: 체크 해제

**예상 결과**:
```
1. 단어 섹션:
   - apple, book, computer, water (4개)

2. 숙어 섹션:
   - kick the bucket, break the ice, piece of cake (3개)

3. 문장 섹션:
   - She loves reading books. (1개)
```

**검증 항목**:
- [ ] 3개 섹션으로 명확히 구분됨
- [ ] 각 섹션에 제목 표시:
  - "단어 (Words)"
  - "숙어 (Phrases)"
  - "문장 (Sentences)"
- [ ] 체크박스 컬럼이 없음
- [ ] 테이블 헤더: 단어 | 의미 (영영뜻 컬럼 없음)
- [ ] 문장 섹션 헤더: ☐ | 문장 | 번역
- [ ] PDF와 HTML 미리보기가 동일함

---

### ✅ 시나리오 3: 의미 표시 옵션 변경

#### 3-1. 영영 뜻만

**옵션**:
- 의미 표시: "영영 뜻만"
- 출력 형식: "입력 순서대로"

**검증**:
- [ ] 테이블 헤더: ☐ (선택) | 단어 | 영영뜻
- [ ] "의미" 컬럼이 없음
- [ ] 영영 정의만 표시됨

#### 3-2. 한영 뜻만

**옵션**:
- 의미 표시: "한영 뜻만"

**검증**:
- [ ] 테이블 헤더: ☐ (선택) | 단어 | 의미
- [ ] "영영뜻" 컬럼이 없음
- [ ] 한국어 번역만 표시됨

#### 3-3. 영영+한영

**옵션**:
- 의미 표시: "영영+한영"

**검증**:
- [ ] 테이블 헤더: ☐ (선택) | 단어 | 의미 | 영영뜻
- [ ] 두 컬럼 모두 표시됨

---

### ✅ 시나리오 4: 체크박스 옵션

**입력**:
```
apple
book
computer
```

#### 4-1. 체크박스 포함

**옵션**: 체크박스 포함 = 체크

**검증**:
- [ ] 첫 번째 컬럼에 ☐ 표시
- [ ] 각 행마다 체크박스 있음

#### 4-2. 체크박스 미포함

**옵션**: 체크박스 포함 = 체크 해제

**검증**:
- [ ] 체크박스 컬럼이 완전히 제거됨
- [ ] 테이블이 더 넓어짐

---

### ✅ 시나리오 5: 실시간 옵션 변경

**절차**:
1. 단어 조회 완료
2. HTML 미리보기 확인
3. 옵션 변경:
   - "영영+한영" → "한영 뜻만" 변경
4. 미리보기 자동 업데이트 확인
5. "입력 순서대로" → "단어끼리, 숙어끼리, 문장끼리" 변경
6. 미리보기 자동 업데이트 확인

**검증 항목**:
- [ ] 옵션 변경 시 즉시 미리보기 반영
- [ ] 새로고침 없이 업데이트
- [ ] 레이아웃 변경이 부드러움
- [ ] 스크롤 위치 유지 (또는 자연스럽게 이동)

---

### ✅ 시나리오 6: 많은 데이터 (여러 페이지)

**입력**: 50개 단어
```
apple, book, computer, water, happy, table, chair, window, door, phone,
tree, flower, garden, mountain, river, ocean, cloud, rain, snow, sun,
moon, star, earth, fire, wind, light, dark, color, shape, sound,
music, dance, song, art, paint, draw, write, read, speak, listen,
think, feel, love, hate, like, want, need, have, make, do
```

**옵션**:
- 출력 형식: "입력 순서대로"
- 의미 표시: "영영+한영"

**검증 항목**:
- [ ] HTML 미리보기가 스크롤 가능
- [ ] A4 페이지가 여러 개 표시 (시뮬레이션)
- [ ] PDF 생성 시 자동 페이지 분할
- [ ] 단어가 페이지 경계에서 잘리지 않음
- [ ] 각 페이지에 페이지 번호 표시
- [ ] 날짜는 첫 페이지에만 표시

---

### ✅ 시나리오 7: 긴 문장 테스트

**입력**:
```
The quick brown fox jumps over the lazy dog.
I went to the supermarket yesterday and bought some groceries for dinner.
She has been studying English for three years and can speak fluently now.
```

**검증 항목**:
- [ ] 긴 문장이 셀 안에서 자동 줄바꿈
- [ ] 번역문도 긴 경우 줄바꿈 처리
- [ ] 테이블이 페이지 너비를 벗어나지 않음
- [ ] 가독성이 좋음

---

### ✅ 시나리오 8: 혼합 + 실패 케이스

**입력**:
```
apple
xyzabc123
kick the bucket
qwertyzxcv
She loves reading.
book
```

**예상 통계**:
- 단어: 2개 (apple, book)
- 숙어: 1개 (kick the bucket)
- 문장: 1개
- 실패: 2개 (xyzabc123, qwertyzxcv)
- 전체: 6개

**검증 항목**:
- [ ] 통계가 정확함
- [ ] 실패한 항목은 미리보기와 PDF에 표시 안 됨
- [ ] 성공한 4개만 PDF에 포함
- [ ] 타입별 분류 시 각 섹션에 올바르게 배치

---

## 🎨 UI/UX 테스트

### HTML 미리보기 디자인

**확인 항목**:
- [ ] A4 페이지 비율 정확함 (210mm × 297mm)
- [ ] 흰색 페이지에 그림자 효과
- [ ] 어두운 배경 (#525659)
- [ ] 스크롤바 스타일이 어두운 테마
- [ ] 테이블 헤더 색상: #2c3e50 (어두운 파랑)
- [ ] 짝수 행 배경: #f9f9f9 (연한 회색)
- [ ] 테두리 색상: #ddd
- [ ] 폰트 크기:
  - 헤더: 12pt
  - 단어: 14pt (굵게)
  - 본문: 11pt
  - 페이지 번호: 10pt

### 반응형 확인

#### 데스크탑 (> 1024px)
- [ ] 100% 크기로 표시
- [ ] 미리보기가 화면에 적절히 배치

#### 태블릿 (768px - 1024px)
- [ ] 70% 스케일로 축소
- [ ] 여전히 읽기 쉬움

#### 모바일 (< 768px)
- [ ] 50% 스케일로 축소
- [ ] 스크롤 가능
- [ ] 가로 스크롤 없음

---

## 📄 PDF 생성 테스트

### PDF 파일 검증

**생성 후 확인**:
- [ ] 파일 크기가 적절함 (1MB 미만)
- [ ] PDF 뷰어에서 정상 열림
- [ ] 날짜가 올바르게 표시됨
- [ ] 페이지 번호가 모든 페이지에 있음
- [ ] 테이블이 읽기 쉬움
- [ ] 한글이 깨지지 않음 (기본 폰트 사용)
- [ ] 프린트 미리보기 정상

### 테이블 레이아웃

**확인 항목**:
- [ ] 여백: 상하좌우 15mm
- [ ] 테이블 헤더가 각 페이지 상단에 반복됨
- [ ] 행이 페이지 경계에서 잘리지 않음
- [ ] 긴 텍스트가 셀 안에서 줄바꿈됨
- [ ] 체크박스가 중앙 정렬됨
- [ ] 단어가 중앙 정렬됨

---

## 🐛 알려진 이슈 및 해결

### 이슈 1: HTML 미리보기와 PDF 간 미세한 차이
**원인**: jsPDF의 자동 레이아웃 알고리즘
**해결**: 대부분 일치하며, 약간의 차이는 허용 범위

### 이슈 2: 페이지 번호가 "1 / 1"로 고정
**원인**: HTML 미리보기는 단일 페이지로 표시
**해결**: PDF 생성 시 정확한 페이지 수 계산됨

### 이슈 3: 아주 긴 단어가 셀을 벗어남
**원인**: CSS/PDF의 word-break 제한
**해결**: 현재는 자동 줄바꿈, 추가 개선 필요 없음

---

## ✅ 체크리스트

### 구현 완료
- [x] PDFPreview 컴포넌트 생성
- [x] A4 페이지 CSS 스타일
- [x] 옵션 실시간 반영
- [x] 의미 1개만 표시하도록 수정
- [x] 날짜 표시 기능
- [x] 타입별 그룹화 지원
- [x] 체크박스 옵션 반영
- [x] meaningDisplay 옵션 반영

### 테스트 완료
- [ ] 단어만 입력
- [ ] 타입별 그룹화
- [ ] 의미 표시 옵션 변경
- [ ] 체크박스 옵션
- [ ] 실시간 옵션 변경
- [ ] 많은 데이터 (여러 페이지)
- [ ] 긴 문장
- [ ] 혼합 + 실패 케이스

---

## 📸 스크린샷 체크

다음 화면을 캡처해서 확인:
1. ✅ 옵션 패널
2. ✅ 통계 표시
3. ✅ HTML 미리보기 (입력 순서대로)
4. ✅ HTML 미리보기 (타입별 분류)
5. ✅ 생성된 PDF (열린 상태)

---

## 🎯 최종 확인

모든 시나리오를 테스트하고 다음을 확인:
1. ✅ **HTML 미리보기가 실제 PDF와 동일함**
2. ✅ **옵션 변경이 즉시 반영됨**
3. ✅ **의미가 1개만 표시됨 (다의어 제거)**
4. ✅ **날짜가 올바르게 표시됨**
5. ✅ **타입별 그룹화가 정확함**
6. ✅ **페이지 레이아웃이 깔끔함**
7. ✅ **반응형 디자인 동작함**

**테스트 완료 일자**: ___________
**테스터**: ___________
**결과**: ⭕ Pass / ❌ Fail
