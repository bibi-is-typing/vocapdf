# VocaPDF UI 업데이트 및 통계 기능 테스트 가이드

## 📋 변경 사항 요약

### 1. 옵션 UI 간소화
- ❌ **제거**: 의미 개수 선택 (1개 고정)
- ❌ **제거**: 유의어, 반의어, 관계어 옵션
- ✅ **유지**: 의미 표시 (영영/한영/둘다)
- ✅ **변경**: 출력 형식 라벨
  - "통합 형식" → "입력 순서대로"
  - "분류 형식" → "단어끼리, 숙어끼리, 문장끼리"
- ✨ **추가**: 날짜 입력 필드 (자유 입력)
- ✅ **유지**: 체크박스 포함 옵션

### 2. 통계 표시 기능 추가
- 📊 단어/숙어/문장 각각 개수 표시
- 🎨 타입별 색상 구분
- 💡 조회 결과 상단에 표시

---

## 🧪 테스트 시나리오

### ✅ 시나리오 1: 단어만 입력

**입력**:
```
apple
book
computer
```

**예상 결과**:
```
통계 표시:
  [단어 3개] [전체 3개]

미리보기:
  - apple - 1개의 의미 [Free Dictionary]
  - book - 1개의 의미 [Free Dictionary]
  - computer - 1개의 의미 [Free Dictionary]
```

**검증 항목**:
- [ ] 통계에서 "단어 3개" 표시
- [ ] "숙어", "문장" 통계는 표시 안 됨
- [ ] 전체 3개 정상 표시
- [ ] 파란색 그라데이션 배경

---

### ✅ 시나리오 2: 숙어만 입력

**입력**:
```
kick the bucket
break the ice
piece of cake
```

**예상 결과**:
```
통계 표시:
  [숙어 3개] [전체 3개]

미리보기:
  - kick the bucket - 1개의 의미
  - break the ice - 1개의 의미
  - piece of cake - 1개의 의미
```

**검증 항목**:
- [ ] 통계에서 "숙어 3개" 표시
- [ ] "단어", "문장" 통계는 표시 안 됨
- [ ] 숙어 타입이 올바르게 감지됨

---

### ✅ 시나리오 3: 문장만 입력

**입력**:
```
She loves reading books.
I went to the store yesterday.
The cat is sleeping on the couch.
```

**예상 결과**:
```
통계 표시:
  [문장 3개] [전체 3개]

미리보기:
  - She loves reading books. - (번역)
  - I went to the store yesterday. - (번역)
  - The cat is sleeping on the couch. - (번역)
```

**검증 항목**:
- [ ] 통계에서 "문장 3개" 표시
- [ ] 문장 타입이 올바르게 감지됨
- [ ] Claude API가 번역 제공 (API 키 있을 경우)

---

### ✅ 시나리오 4: 혼합 입력 (핵심 테스트)

**입력**:
```
apple
kick the bucket
She loves reading.
book
break the ice
computer
I went to school.
yeet
```

**예상 결과**:
```
통계 표시:
  [단어 5개] [숙어 2개] [문장 2개] [전체 9개]

분석:
  - apple: 단어
  - kick the bucket: 숙어
  - She loves reading.: 문장
  - book: 단어
  - break the ice: 숙어
  - computer: 단어
  - I went to school.: 문장
  - yeet: 단어 (Claude API 사용)
```

**검증 항목**:
- [ ] 통계가 모두 정확하게 표시됨
- [ ] 단어, 숙어, 문장이 올바르게 분류됨
- [ ] 각 타입의 색상이 구분됨
  - 단어: 파란색 (#667eea)
  - 숙어: 보라색 (#764ba2)
  - 문장: 녹색 (#28a745)
- [ ] "전체" 통계는 테두리 강조

---

### ✅ 시나리오 5: 실패 케이스 포함

**입력**:
```
apple
xyzabc123
book
qwertyzxcv
```

**예상 결과**:
```
통계 표시:
  [단어 2개] [실패 2개] [전체 4개]

미리보기:
  - apple - 1개의 의미 [Free Dictionary]
  - xyzabc123 - 사전에서 찾을 수 없습니다
  - book - 1개의 의미 [Free Dictionary]
  - qwertyzxcv - 사전에서 찾을 수 없습니다
```

**검증 항목**:
- [ ] "실패 2개" 통계 표시 (빨간색)
- [ ] 성공한 단어와 실패한 단어 구분
- [ ] 실패한 단어는 에러 메시지 표시

---

### ✅ 시나리오 6: 빈 결과

**입력**:
```
xyzabc123
qwertyzxcv
asdfghjkl999
```

**예상 결과**:
```
통계 표시:
  [실패 3개] [전체 3개]

미리보기:
  - xyzabc123 - 사전에서 찾을 수 없습니다
  - qwertyzxcv - 사전에서 찾을 수 없습니다
  - asdfghjkl999 - 사전에서 찾을 수 없습니다
```

**검증 항목**:
- [ ] 통계에서 "실패 3개" 강조
- [ ] 성공한 항목 통계는 표시 안 됨
- [ ] 에러 메시지가 명확함

---

## 🎨 UI 테스트

### 옵션 섹션 확인

**확인 항목**:
- [ ] "의미 개수" 선택 제거됨
- [ ] "유의어/반의어/관계어" 옵션 제거됨
- [ ] "의미 표시" 드롭다운 정상 동작
  - [ ] "영영 뜻만" 선택 가능
  - [ ] "한영 뜻만" 선택 가능
  - [ ] "영영+한영" 선택 가능

- [ ] "출력 형식" 라디오 버튼 표시
  - [ ] "입력 순서대로" 선택 가능
  - [ ] "단어끼리, 숙어끼리, 문장끼리" 선택 가능
  - [ ] 라디오 버튼 UI가 깔끔함

- [ ] "학습 날짜" 입력 필드
  - [ ] 기본값: 오늘 날짜 한국어 형식
  - [ ] 자유 입력 가능
  - [ ] 포커스 시 보라색 테두리

- [ ] "체크박스 포함" 옵션 정상 동작

### 통계 표시 확인

**확인 항목**:
- [ ] 통계 컨테이너가 그라데이션 배경
- [ ] 각 통계 카드가 흰색 배경
- [ ] hover 시 살짝 위로 올라감
- [ ] 타입별 색상이 정확함
  - [ ] 단어: 파란색
  - [ ] 숙어: 보라색
  - [ ] 문장: 녹색
  - [ ] 실패: 빨간색
  - [ ] 전체: 파란색 테두리

- [ ] 값이 0인 통계는 표시 안 됨
- [ ] "전체" 통계는 항상 표시됨

---

## 📄 PDF 생성 테스트

### 테스트 1: 입력 순서대로

**설정**:
- 출력 형식: "입력 순서대로"
- 의미 표시: "영영+한영"
- 체크박스 포함: 체크
- 학습 날짜: "2025년 10월 10일"

**입력**:
```
apple
kick the bucket
book
```

**검증**:
- [ ] PDF 상단에 "학습일: 2025년 10월 10일" 표시
- [ ] 입력 순서대로 단어 배열
- [ ] 테이블에 체크박스 컬럼 있음
- [ ] 의미 컬럼에 한영 뜻
- [ ] 영영뜻 컬럼 있음

---

### 테스트 2: 타입별 분류

**설정**:
- 출력 형식: "단어끼리, 숙어끼리, 문장끼리"
- 의미 표시: "한영 뜻만"
- 체크박스 포함: 체크 해제

**입력**:
```
apple
kick the bucket
She loves reading.
book
break the ice
```

**검증**:
- [ ] 3개 섹션으로 분리
  - [ ] "단어 (Words)" 섹션: apple, book
  - [ ] "숙어 (Phrases)" 섹션: kick the bucket, break the ice
  - [ ] "문장 (Sentences)" 섹션: She loves reading.
- [ ] 체크박스 컬럼 없음
- [ ] 한영 뜻만 표시 (영영뜻 컬럼 없음)

---

## 🐛 알려진 이슈 및 해결

### 이슈 1: 날짜 형식
**문제**: 날짜를 이상하게 입력하면 PDF에 그대로 표시
**해결**: 의도된 동작 (자유 입력)

### 이슈 2: 통계가 표시 안 됨
**문제**: calculateStats 함수가 호출되지 않음
**해결**: wordData가 null이 아닌지 확인

### 이슈 3: PDF에서 meaningDisplay 옵션 미반영
**문제**: 옵션 값이 변경되었지만 PDF에 적용 안 됨
**해결**: pdfGenerator.js 업데이트 완료

---

## ✅ 체크리스트

### Frontend
- [x] 옵션 state 구조 변경
- [x] UI에서 불필요한 옵션 제거
- [x] 라디오 버튼 라벨 변경
- [x] 날짜 입력 필드 추가
- [x] 통계 계산 함수 추가
- [x] 통계 표시 컴포넌트 추가
- [x] CSS 스타일 추가
- [x] PDF 생성 로직 업데이트

### Backend
- [x] 옵션 유효성 검증 유연화
- [x] normalizedOptions 적용
- [x] meaningDisplay 옵션 처리
- [x] outputFormat 옵션 처리

### Documentation
- [x] 테스트 가이드 작성
- [ ] 사용자 매뉴얼 업데이트

---

## 🎯 최종 확인

모든 테스트 시나리오를 실행하고 다음을 확인하세요:

1. ✅ **옵션 UI가 간소화됨**
2. ✅ **통계가 정확하게 표시됨**
3. ✅ **PDF 생성이 정상 동작함**
4. ✅ **모든 타입이 올바르게 분류됨**
5. ✅ **에러 처리가 명확함**

---

**테스트 완료 일자**: ___________
**테스터**: ___________
**결과**: ⭕ Pass / ❌ Fail
